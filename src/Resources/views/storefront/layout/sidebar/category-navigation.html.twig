{% sw_extends '@Storefront/storefront/layout/sidebar/category-navigation.html.twig' %}
{% block layout_navigation_categories_list_entry %}
    {% if item.category.id in activeResult.path %}
        {% block layout_navigation_categories_recoursion %}
            {% set levelIncrement = item.category.id in activeResult.id ? 1 : 0 %}
            {% set nextNavigationTree = level + levelIncrement >= navigationMaxDepth and item.siblings is not empty ? item.siblings : item.children %}
            {% sw_include '@Storefront/storefront/layout/sidebar/category-navigation.html.twig' with {
                navigationTree: nextNavigationTree,
                activeResult: activeResult,
                level: level + levelIncrement
            } only %}
        {% endblock %}
    {% endif %}
    {% if (item.category.id in activeResult.id) or (item.category.parentId in activeResult.id) %}
        {{ parent() }}
    {% endif %}
{% endblock %}